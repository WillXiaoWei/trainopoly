{"version":3,"sources":["../../../../assets/Script/assets/Script/welcome.js"],"names":["cc","Class","extends","Component","properties","onLoad","user_info","wx","getStorage","key","success","res","console","log","data","avatar_url","avatarUrl","loader","load","url","type","err","texture","avatarLocation","sprite","find","getComponent","Sprite","sprite_frame","SpriteFrame","textureLoaded","spriteFrame","greetingLocation","greeting","Label","string","nickName","city","country","fontSize","buttonLocation","nodeButton","Button","node","on","Node","EventType","TOUCH_START","event","director","loadScene","startButtonLocation","nodeStartButton","update","dt"],"mappings":";;;;;;AAAA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAQL;AACAC,YAAQ,kBAAY;;AAEhB,YAAIC,SAAJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAC,WAAGC,UAAH,CACI;AACIC,iBAAI,UADR;AAEIC,mBAFJ,mBAEYC,GAFZ,EAEgB;AACRC,wBAAQC,GAAR,CAAYF,IAAIG,IAAhB;AACAR,4BAAYK,IAAIG,IAAhB;AACA,oBAAIC,aAAaJ,IAAIG,IAAJ,CAASE,SAA1B;AACAJ,wBAAQC,GAAR,CAAY,WAAZ;AACAb,mBAAGiB,MAAH,CAAUC,IAAV,CAAe,EAAEC,KAAKJ,UAAP,EAAmBK,MAAM,KAAzB,EAAf,EAAgD,UAAUC,GAAV,EAAeC,OAAf,EAAwB;AACpEtB,uBAAGa,GAAH,CAAOS,OAAP;AACA,wBAAIC,iBAAiB,eAArB;AACA,wBAAIC,SAASxB,GAAGyB,IAAH,CAAQF,cAAR,EAAwBG,YAAxB,CAAqC1B,GAAG2B,MAAxC,CAAb;AACA,wBAAIC,eAAe,IAAI5B,GAAG6B,WAAP,CAAmBP,OAAnB,CAAnB;AACA,wBAAGM,aAAaE,aAAb,EAAH,EAAkC;AAC9BN,+BAAOO,WAAP,GAAqBH,YAArB;AACA5B,2BAAGa,GAAH,CAAOW,MAAP;AACH;AACJ,iBATD;AAUA,oBAAIQ,mBAAmB,iBAAvB;AACA,oBAAIC,WAAWjC,GAAGyB,IAAH,CAAQO,gBAAR,EAA0BN,YAA1B,CAAuC1B,GAAGkC,KAA1C,CAAf;AACAD,yBAASE,MAAT,GAAkB,QAAQ7B,UAAU8B,QAAlB,GAA6B,QAA7B,GAAwC9B,UAAU+B,IAAlD,GAAyD,IAAzD,GAAgE/B,UAAUgC,OAA1E,GAAmF,6BAArG;AACAL,yBAASM,QAAT,GAAoB,EAApB;AAEH;AAtBL,SADJ;;AA6BA,YAAIC,iBAAiB,mBAArB;AACA,YAAIC,aAAazC,GAAGyB,IAAH,CAAQe,cAAR,EAAwBd,YAAxB,CAAqC1B,GAAG0C,MAAxC,CAAjB;;AAEAD,mBAAWE,IAAX,CAAgBC,EAAhB,CAAmB5C,GAAG6C,IAAH,CAAQC,SAAR,CAAkBC,WAArC,EAAkD,UAASC,KAAT,EAAe;AAC9D;AACChD,eAAGa,GAAH,CAAO,UAAP;AACCb,eAAGiD,QAAH,CAAYC,SAAZ,CAAsB,UAAtB;AACJ,SAJD;;AAMA,YAAIC,sBAAsB,iBAA1B;AACA,YAAIC,kBAAkBpD,GAAGyB,IAAH,CAAQ0B,mBAAR,EAA6BzB,YAA7B,CAA0C1B,GAAG0C,MAA7C,CAAtB;;AAEAU,wBAAgBT,IAAhB,CAAqBC,EAArB,CAAwB5C,GAAG6C,IAAH,CAAQC,SAAR,CAAkBC,WAA1C,EAAuD,UAASC,KAAT,EAAe;AAClE;AACAhD,eAAGa,GAAH,CAAO,WAAP;AACAb,eAAGiD,QAAH,CAAYC,SAAZ,CAAsB,gBAAtB;AACH,SAJD;AAMH,KA7EI;;AA+EL;AACAG,YAAQ,gBAAUC,EAAV,EAAc,CAErB;AAlFI,CAAT","file":"welcome.js","sourceRoot":"../../../../assets/Script","sourcesContent":["import {setAudioId, getAudioId} from './Storage'\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n\n    },\n\n    // use this for initialization\n    onLoad: function () {\n\n        var user_info;\n        //var res = cc.loader.getRes(\"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoCu6ITtLK6OvRI9wiaMUWCWawIHGicn78FiaLUeUia7jhTYVDnlhNDL1bMEBt0ejP2Rev4Yv3aApCJsQ/132\")\n        // cc(\"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoCu6ITtLK6OvRI9wiaMUWCWawIHGicn78FiaLUeUia7jhTYVDnlhNDL1bMEBt0ejP2Rev4Yv3aApCJsQ/132\",function (texture) {\n        //     cc.log(texture)\n        //     }\n        // )\n        //cc.log(res)\n\n        // cc.loader.load({ url: avatar_url, type: 'png' },function (err, texture) {\n        //     cc.log(texture)\n        //     let avatarLocation = \"Canvas/Avatar\"\n        //     let sprite = cc.find(avatarLocation).getComponent(cc.Sprite)\n        //     var sprite_frame = new cc.SpriteFrame(texture)\n        //     if(sprite_frame.textureLoaded ()) {\n        //         sprite.spriteFrame = sprite_frame;\n        //         cc.log(sprite)\n        //     }\n        // })\n\n        wx.getStorage(\n            {\n                key:\"userInfo\",\n                success(res){\n                    console.log(res.data)\n                    user_info = res.data\n                    let avatar_url = res.data.avatarUrl\n                    console.log(\"avatar!!!\")\n                    cc.loader.load({ url: avatar_url, type: 'png' },function (err, texture) {\n                        cc.log(texture)\n                        let avatarLocation = \"Canvas/Avatar\"\n                        let sprite = cc.find(avatarLocation).getComponent(cc.Sprite)\n                        var sprite_frame = new cc.SpriteFrame(texture)\n                        if(sprite_frame.textureLoaded ()) {\n                            sprite.spriteFrame = sprite_frame;\n                            cc.log(sprite)\n                        }\n                    })\n                    let greetingLocation = \"Canvas/greeting\"\n                    let greeting = cc.find(greetingLocation).getComponent(cc.Label)\n                    greeting.string = \"Hi \" + user_info.nickName + \" from \" + user_info.city + \", \" + user_info.country+ \",\\n ready to be humiliated?\"\n                    greeting.fontSize = 13\n\n                }\n            }\n        )\n\n\n\n        let buttonLocation = \"Canvas/settingBtn\";\n        let nodeButton = cc.find(buttonLocation).getComponent(cc.Button);\n\n        nodeButton.node.on(cc.Node.EventType.TOUCH_START, function(event){\n\t          // click event\n\t           cc.log(\"settings\");\n             cc.director.loadScene('settings');\n        });\n\n        let startButtonLocation = \"Canvas/startBtn\";\n        let nodeStartButton = cc.find(startButtonLocation).getComponent(cc.Button);\n\n        nodeStartButton.node.on(cc.Node.EventType.TOUCH_START, function(event){\n            // click event\n            cc.log(\"game loop\");\n            cc.director.loadScene('mainSingleGame');\n        });\n\n    },\n\n    // called every frame\n    update: function (dt) {\n\n    },\n});\n"]}